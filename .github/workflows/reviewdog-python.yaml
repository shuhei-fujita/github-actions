name: reviewdog-python

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  reviewdog:
    runs-on: ubuntu-latest
    env:
      REVIEWDOG_GITHUB_API_TOKEN: ${{ secrets.ACTIONS_TOKEN }}
    steps:
    - name: Check out code.
      uses: actions/checkout@v4

    - name: Set up reviewdog
      uses: reviewdog/action-setup@v1
      with:
        reviewdog_version: latest

    - name: Set up Python and flake8
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    # Install specific flake8 version (this step is not required. Default is "latest")
    - run: pip install flake8==6.0.0

    # Install flake8 extensions (this step is not required. Default is "None").
    - run: pip install flake8-docstrings flake8-simplify flake8-unused-arguments flake8-quotes

    - name: flake8 Lint
      uses: reviewdog/action-flake8@v3
      with:
        github_token: ${{ secrets.ACTIONS_TOKEN }}
        continue-on-error: true
        reporter: github-pr-review
